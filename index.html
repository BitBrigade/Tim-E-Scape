<!DOCTYPE html>
<html>
  <head>
    <script src="https://cdn.jsdelivr.net/npm/phaser@3.15.1/dist/phaser-arcade-physics.min.js"></script>
  </head>
  <body>
    <script>
      // Game config
      var config = {
        type: Phaser.AUTO, // sets type automatically to WEBGL; falls back to CANVAS if WEBGL is not supported
        width: 800,
        height: 600,

        // Game physics
        physics: {
          default: 'arcade', // physics system
          arcade: {
            gravity: { y: 300 },
          },
        },
        scene: {
          preload: preload,
          create: create,
          update: update,
        },
      }

      var game = new Phaser.Game(config)

      // scene functions:

      // loads assets
      function preload() {
        this.load.image('water', 'assets/water.png')
        this.load.image('tower', 'assets/tower.png')
        // spritesheet
        this.load.spritesheet('rings', 'assets/rings.png', {
          frameWidth: 64,
          frameHeight: 64,
        })
      }

      var tower
      var rings
      var cursors

      // draws stuff
      function create() {
        this.add.image(400, 300, 'water')

        tower = this.physics.add.staticGroup() // static group of objects are immovable

        tower.create(400, 500, 'tower').setScale(2).refreshBody()

        rings = this.physics.add.sprite(100, 450, 'rings') // creates sprite
        this.physics.add.collider(rings, tower) // checks collision with platforms

        /*
          The sprite was created via the Physics Game Object Factory (this.physics.add) which means it has a Dynamic Physics body by default.
        */

        // self explanatory stuff
        rings.setBounce(0.2)
        rings.setCollideWorldBounds(true)

        cursors = this.input.keyboard.createCursorKeys()
      }

      // update game state
      function update() {
        this.physics.add.overlap(rings, tower, collectRing, null, this)
      }

      function collectRing(rings, tower) {
        rings.disableBody(true, true)
      }
    </script>
  </body>
</html>
